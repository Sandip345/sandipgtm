---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const items = await getCollection('news');
  return items.map((n) => ({ params: { slug: n.slug }, props: { n } }));
}

const { n } = Astro.props;
const { Content } = await n.render();
---

<BaseLayout title={`${n.data.title} — News`} description={n.data.description}>
  {/* Centered column so header + card align exactly */}
  <div class="mx-auto w-full max-w-4xl space-y-6">
    <a
      href="/news"
      class="t-mono t-meta inline-flex items-center gap-2 text-xs hover:text-slate-900 dark:hover:text-emerald-300"
    >
      <span aria-hidden="true">←</span> BACK TO NEWS
    </a>

    <header class="space-y-3">
      <div class="t-mono t-meta text-xs">
        $ less ./news/{n.slug}.md <span class="cursor-blink ml-1">|</span>
      </div>

      <h1 class="text-3xl font-semibold tracking-tight dark:text-emerald-300">
        {n.data.title}
      </h1>

      <div class="flex flex-wrap items-center gap-2">
        {n.data.date ? <span class="t-badge t-mono">{n.data.date}</span> : null}
      </div>

      {n.data.description ? (
        <p class="t-muted leading-relaxed">
          {n.data.description}
        </p>
      ) : null}
    </header>

    <article class="t-card p-6 md:p-8">
      <div class="prose prose-slate max-w-none dark:prose-invert">
        <Content />
      </div>
    </article>
  </div>

  <style>
    /* Terminal readability tweaks inside prose (same as projects/experience) */
    :global(.dark .prose) { color: rgba(215, 251, 231, 0.86); }
    :global(.dark .prose strong) { color: rgba(215, 251, 231, 0.95); }

    :global(.dark .prose a) {
      color: rgba(110, 231, 183, 0.95);
      text-decoration: none;
    }
    :global(.dark .prose a:hover) { text-decoration: underline; }

    :global(.dark .prose code) {
      color: rgba(134, 239, 172, 0.95);
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.10);
      padding: 0.15rem 0.35rem;
      border-radius: 0.5rem;
    }
    :global(.dark .prose pre) {
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.10);
    }
    :global(.dark .prose hr) { border-color: rgba(255, 255, 255, 0.10); }
    :global(.dark .prose blockquote) { border-left-color: rgba(34, 197, 94, 0.35); }
  </style>
</BaseLayout>
