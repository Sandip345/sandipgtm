---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const items = (await getCollection('news')).sort((a, b) =>
  (b.data.date ?? '').localeCompare(a.data.date ?? '')
);
---

<BaseLayout title="News" description="Updates and posts">
  <div class="text-xl font-semibold tracking-tight dark:text-slate-100">
    <h1 class="text-3xl font-semibold tracking-tight">News</h1>
    <p class="text-slate-600">Markdown-driven news items from <code class="rounded bg-slate-100 px-1">src/content/news</code>.</p>
  </div>

  <div class="space-y-4">
    {items.map((n) => (
      <a
        href={`/news/${n.slug}`}
class="text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-emerald-300"
      >
        <div class="text-sm text-slate-500">{n.data.date ?? ''}</div>
        <div class="text-xl font-semibold tracking-tight dark:text-slate-100">{n.data.title}</div>
        {n.data.description ? <p class="mt-2 text-sm text-slate-600">{n.data.description}</p> : null}
      </a>
    ))}
  </div>
</BaseLayout>
